\input{arbeit-vorlage-praeambel.tex} % Importiere die Einstellungen aus der Präambel
% hier beginnt der eigentliche Inhalt
\begin{document}
\pagenumbering{Roman} % große Römische Seitenummerierung
\pagestyle{empty}

% Titelseite
\clearscrheadings\clearscrplain

\begin{center}
\begin{Huge}
Institut für Mathematik und Informatik\\
\vspace{3mm}
\end{Huge}{\Large Fernuniversiät Hagen}\\

\vspace{20mm}
\begin{Large}
Vergleichende Implementierung und Evaluierung einer ereignisgesteuerten, nicht
blockierenden I/O Lösung für eine datenintensive Real-Time Webanwendung in Javascript
und Dart\\
\end{Large}
\vspace{8mm}
Bachelorarbeit\\
\vspace{0.4cm}
\vspace{2 cm}
Barbara Drüke \\
Matrikel-Nummer 7397860\\
\vspace{5cm}
\begin{tabular}{ll}
{\bf Betreuer} & Dr. Jörg Brunsmann\\
{\bf Erstprüfer}&Prof. Hemmje\\
{\bf Zweitprüfer}&Prof. Mustera\\
\end{tabular}

\end{center}
\clearpage


\pagestyle{useheadings} % normale Kopf- und Fußzeilen für den Rest

\tableofcontents
\listoffigures
\listoftables







% richtiger Inhalt
\chapter{Einleitung}
\pagenumbering{arabic} % ab jetzt die normale arabische Nummerierung
\section{Motivation für diese Arbeit}\label{s.Motivation für diese Arbeit}
Beschreibung der Aufgabenstellung
Die Vesseltracker.com GmbH ist ein Schiffsmonitoring und -reporting-Dienstleister.  Die Daten resultieren aus den AIS (Automatic Identification System) – Meldungen, die von allen Schiffen über Funk regelmäßig zu senden sind. Das Unternehmen unterhält ein Netzwerk von ca. 800 terrestrischen AIS-Antennen, mit denen diese AIS-Meldungen empfangen und via Internet an einen zentralen Rohdatenserver geschickt werden. Der Rohdatenserver verarbeitet die Meldungen und gibt sie umgewandelt und gefiltert an die Anwendungen des Unternehmens weiter.

Die Kernanwendung des Unternehmens, eine Webanwendung, speichert die AIS-Daten in einer Geodatenbank, kombiniert sie mit weiteren Datenquellen (Schiffs-Stammdaten, Satelliten-AIS-Daten) und stellt sie angemeldeten Nutzern über das Unternehmensportal (www.vesseltracker.com) zur Verfügung. Damit können Kunden sich über alle weltweit fahrenden Schiffe detailliert informieren. Zusätzlich können sie sich über eine geographische Visualisierung der Schiffspositionen auf Openstreetmap-Karten einen Überblick über Schiffspositionen verschaffen. Diese Karten zeigen alle Schiffe an, die sich in dem frei wählbaren Kartenausschnitt zu der Zeit befinden. Zu einzelnen Schiffen kann sich der Kunde die gefahrene Route der letzten 24 h anzeigen lassen. Die Positionsinformationen werden jeweils initial bei Änderung des betrachteten Bereichs abgerufen und anschließend minütlich aktualisiert.

In letzter Zeit gewinnen real-time-Anwendungen zunehmend an Bedeutung und ihre Verbreitung wird durch den Fortschritt der verfügbaren Webtechnologien auf breiter Basis unterstützt. Da die empfangenen AIS-Daten aufgrund ihrer hohen Aktualisierungsrate für eine real-time-Darstellung prädestiniert sind, entstand die Idee, eine real-time Darstellung der Schiffsbewegungen im Browser zu ermöglichen. Damit soll es dem Kunden möglich sein, Schiffsmanöver wie Anlegen, Festmachen, Ablegen, Schleppen, Lotsen, Betanken oder Schleusendurchfahrten sozusagen 'live' mitzuverfolgen.

\section{Aufbau der Arbeit}\label{s.Aufbau der Arbeit}



\chapter{Beschreibung der Anwendung: Schiffsverfolgung per AIS-Daten-Strom}\label{c.Beschreibung der Anwendung: Schiffsverfolgung per AIS-Daten-Strom}

\section{ AIS-Nachrichtentypen und ihre Verarbeitung}\label{s.AIS-Nachrichtentypen und ihre Verarbeitung}
\section{Visualisierung von geographischen Bewegungsdaten im Webbrowser}\label{s.Visualisierung von geographischen Bewegungsdaten im Webbrowser}
\section{Beschreibung der Anforderungen}\label{s.Beschreibung der Anforderungen}


Die funktionalen Anforderungen sind:
\begin{itemize}

\item als Datenquelle sollen ausschließlich die vom Rohdatenserver als JSON-Datenstrom zur Verfügung gestellten AIS-Informationen dienen
\item Schiffe sollen an ihrer aktuellen (realtime) Position auf einer Karte im Browser dargestellt werden
\item Positionsänderungen einzelner Schiffe sollen ad hoc sichtbar gemacht werden
\item die Schiffsbewegungen auf der Karten sollen nicht sprunghaft, sondern fließend erscheinen (Animation der Schiffsbewegungen in dem Zeitraum zwischen zwei Positionsmeldungen)
\item die Karte soll in 16 Zoomstufen die Maßstäbe von 1:2000 bis 1: 200 Mio abdecken
\item Schiffe sollen auf der Karte als Icons dargestellt werden, die den Navigationsstatus und gegebenenfalls den Kurs wiederspiegeln
\item bei hoher Auflösung und ausreichend statischen AIS-Informationen soll ein Schiff als Polygon in die Karte eingezeichnet werden.
\item bei geringer Auflösung ist ein Überblick über die Verteilung der empfangenen Schiffe zu vermitteln

\item Detail-Informationen zu jedem Schiff sollen als Popups über das Icon abrufbar sein
\end{itemize}

Nicht funktionale Anforderungen sind:
\begin{itemize}
\item die von den Antennen empfangenen AIS-Daten sind mit minimaler Verzögerung (< 500 msec) auf der Karte darzustellen
\item die Anwendung sollte ca. 300 Verbindungen gleichzeitig erlauben und skalierbar sein
als Clients der Anwendung sollten die gängigsten Browser unterstützt werden (IE, Chrome, Firefox, Safari, Opera) 
\item die Implementierungen werden auf Github als privates vesseltracker repository gehalten
\item als Kartenmaterial sind die von vesseltracker gehosteten OpenstreetMap-Karten zu verwenden
\item verwendete Software-Module sollten frei zugänglich sein (open source) 
\end{itemize}

\subsection{Grobentwurf der Anwendung}\label{s.Grobentwurf der Anwendung}
Die eingehende Schnittstelle der zu erstellenden Anwendung ist die Verbindung zum Rohdatenserver, die als TCP-Verbindung ausgeführt ist und einen JSON-Datenstrom liefert.
Die ausgehende Schnittstelle ist der HTTP-Client (Browser).

Zu erstellen ist also eine Client-Server-Anwendung, in der der Server zweifaches zu leisten hat, nämlich 
\begin{enumerate}
 \item eine tcp-socket-Verbindung zum Rohdatenserver zu unterhalten und
  \item eine bidirektionale Verbindung zum HTTP-Client zu halten, in der der Client jederzeit Änderungen des betrachteten Kartenausschnittes an den Server senden und der Server jederzeit den Client über relevante, aus dem JSON-Datenstrom ausgelesene, Schiffsbewegungen im betrachteten Kartenausschnitt informieren kann.
\end{enumerate}

Bidirektionale Client-Server-Verbindungen über HTTP existieren schon seit längerem (HTTP Long Polling, HTTP Streaming, Ajax on demand). Diese Verbindungen teilen jedoch alle den Nachteil, dass sie das HTTP-Protokoll nutzen und so bei jeder Nachricht einen Overhead an Informationen mitsenden, was zu hohen Latenzzeiten führt. Dieses Problem ist mit der Einführung des Websocket-Protokolls 2011 überwunden worden, weil Websockets nach einem initialen Handshake in HTTP einen Upgrade der Verbindung auf das Websocket-Protokoll aushandeln. 
Damit sind Websockets eine vielversprechende Technologie für datenintensive Realtime-Anwendungen mit vielen simultanen Client-Verbindungen, weshalb sie in der geplanten Anwendung zum Einsatz kommen sollen. 

\bild{Exposee_graphik_Realtimeapp}{12cm}{Entwurf der Realtime-Anwendung}{Entwurf der Realtime-Anwendung}


\chapter{Grundlagen}\label{s.Grundlagen}

\section{Bidirektionale Kommunikation über Websockets}\label{s.Bidirektionale Kommunikation über Websockets}

\subsection{HTML5-Websocket API-Spezifikation}
Um über die Einschränkungen des request/response Musters hinwegzukommen, bei dem Anfragen des Client vom Server beantwortet werden, sind kontinuierlich Fortschritte in Richtung einer bidirektionialen Verbindung zwischen Client und Server gemacht worden.
Mit HTTP Long Polling, HTTP Streaming und Ajax on demand ist es für den Server möglich, beim Eintreffen neuer Daten, scheinbar selbständig einen Datenaustausch zum Client zu initieren. Dabei handelt es sich eigentlich nur um einen aufgeschobenen response auf einen zuvor gestellten client-Request.
Das Problem dieser Technologien liegt aber darin, dass sie, weil sie http-Nachrichten austauschen, einen großen Überhang an Header-Informationen mitsenden müssen, der sich in Summe negativ auf die Verzögerung auswirkt. Damit sind sie für zeitkritische (realtime) Anwendungen nicht geeignet.

Das 2011 eingeführte Websocket-Protokoll dagegen beschreibt eine API, die eine echte Socket-Verbindung zwischen Server und Client ermöglicht, in der beide Seiten jederzeit Daten schicken können. Dieser Socket wird im Anschluss an einen intialen HTTP-handshake aufgebaut, indem Server und Client  einen Upgrade der Verbindung auf das Websocket-Protokoll aushandeln. 

\subsection{Vorstellung verschiedener Implementierungen von Websockets}

\subsubsection{Nodejs-Websockets}

\subsubsection{Dart-Websockets mit Dart:IO}
Die Gleichung
\begin{equation}
a^2 + b^2 = c^2
\end{equation}
ist allseits bekannt und bedarf wohl keiner weiteren Erläuterung.

\section{Google Dart als moderne Programmiersprache für Webanwendungen}\label{s.Google Dart als moderne Programmiersprache für Webanwendungen}

Auch nicht schlecht ist \autoref{img.bild}. Aber überhaupt keinen Sinn macht \autoref{tab.sinnlos}. Hieran sieht man den Vorteil des autoref-Befehls und das so Links erstellt werden.

\subsection{Motivation für Dart}

\begin{table}[!hbt]\vspace{1ex}\centering\begin{tabular}{|l|l|}
\hline
Formen & Städte\\
\hline
\hline
Quadrat &  Bunkenstedt \\
\hline
Dreieck &  Laggenbeck\\
\hline
Kreis &  Peine\\
\hline
Raute & Wakaluba \\
\hline
\end{tabular}
\caption{\label{tab.sinnlos}eine sinnlose Tabelle}
\vspace{2ex}\end{table}

\subsection{Eigenschaften und Besonderheiten der Programmiersprache Dart}\label{s.Eigenschaften und Besonderheiten der Programmiersprache Dart}

\subsection{Dart Tools (DartEditor, dart2js-compiler)}\label{s.Dart Tools (DartEditor, dart2js-compiler)}


\subsection{Einbindung von Javascript-Bibliotheken in Dart mit js-interop}\label{s.Einbindung von Javascript-Bibliotheken in Dart mit js-interop}

Komplexe Tabellen sind nicht sehr einfach:

\begin{table}[!hbt]\vspace{1ex}\centering
\begin{tabular}{|ll||l|l|l|l|}\hline
\multicolumn{2}{|c||}{}&\multicolumn{4}{c|}{ dies} \\
\multicolumn{2}{|c||}{}& von dort  & und dort & über hier & zu Los \\\hline\hline
\multirow{3}*{\rotatebox{90}{das}} & hier &  bla  & bla  & bla  & bla \\\cline{2-6}
& dort & bla  & bla & bla  & bla  \\\cline{2-6}
& da &  bla  & bla & bla & bla \\\hline
\end{tabular}
\caption[eine kompliziertere Tabelle]{eine kompliziertere Tabelle mit viel Beschreibungstext, der aber nicht im Tabellenverzeichnis auftauschen soll}
\vspace{2ex}
\end{table}



\chapter{Vergleichende Evaluation}
\section{Implementierungsaufwand}
\subsection{Socket.io-Server und -Client}
\subsection{HTML5-Server und Javascript-Client}
\subsection{HTML5-Server und Dart-Client}
\section{Kommunikationsaufwand}
\subsection{Socket.io-Server und -Client}
\subsection{HTML5-Server und Javascript-Client}
\subsection{HTML5-Server und Dart-Client}
\section{Performanz und Robustheit im Praxistest}
\subsection{Socket.io-Server und -Client}
\subsection{HTML5-Server und Javascript-Client}
\subsection{HTML5-Server und Dart-Client}
\section{Browserunterstützung}
\subsection{Socket.io-Server und -Client}
\subsection{HTML5-Server und Javascript-Client}
\subsection{HTML5-Server und Dart-Client}

\chapter{Fazit}\label{c.Fazit}
 \section{Ergebnisse }
\addcontentsline{toc}{chapter}{Symbolverzeichnis}
\markboth{Symbolverzeichnis}{Symbolverzeichnis}
\section*{Allgemeine Symbole}\label{s.sym.alg}
\begin{flushleft}\begin{tabularx}{\textwidth}{l|X}
Symbol & Bedeutung\\\hline
$a$ & der Skalar $a$ \\
$\vec{x}$ & der Vektor $\vec{x}$\\
$\mat{A}$ & die Matrix $\mat{A}$\\
\end{tabularx}\end{flushleft}
\section{Ausblick}

% Anhang
\begin{landscape}\begin{multicols}{2}
\appendix
\chapter{Anhang}
\section{Quelltexte}
%\subsubsection*{cpu.c aus Linux 2.6.16}\label{s.cpu}\lstinputlisting[language=Ruby]{code/aisDart.dart}
\end{multicols}\end{landscape}


\bibliographystyle{alphadin_martin}
\bibliography{bibliographie}


\chapter*{Erklärung}

Hiermit versichere ich, dass ich die vorliegende Arbeit selbstständig verfasst und keine anderen als die angegebenen Quellen und Hilfsmittel benutzt habe, dass alle Stellen der Arbeit, die wörtlich oder sinngemäß aus anderen Quellen übernommen wurden, als solche kenntlich gemacht und dass die Arbeit in gleicher oder ähnlicher Form noch keiner Prüfungsbehörde vorgelegt wurde.

\vspace{3cm}
Ort, Datum \hspace{5cm} Unterschrift\\

\end{document}